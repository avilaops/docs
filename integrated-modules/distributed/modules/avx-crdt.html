<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>avx-crdt - Avx Documentation</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="../index.html" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <span>‚ö°</span>
                    <span>Avx Distributed Systems</span>
                </a>
            </div>
            <div class="nav-controls">
                <button class="theme-toggle" onclick="toggleTheme()">‚òÄÔ∏è Modo Claro</button>
                <div class="language-selector">
                    <button class="language-btn" onclick="toggleLanguageDropdown()">üåç Idioma</button>
                    <div class="language-dropdown"></div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div style="margin-bottom: 2rem;">
            <a href="../index.html" style="color: var(--primary-orange);">‚Üê Voltar</a>
        </div>

        <!-- Module Header -->
        <section class="section">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <span style="font-size: 3rem;">üîÑ</span>
                <h1 class="section-title">avx-crdt</h1>
            </div>
            <p style="font-size: 1.2rem; opacity: 0.8;">
                Tipos de dados replicados sem conflito (CRDTs) para sincroniza√ß√£o distribu√≠da eventual.
            </p>
        </section>

        <!-- Overview -->
        <section class="section">
            <h2 class="section-title">Vis√£o Geral</h2>
            <div class="code-block">
                <p><strong>avx-crdt</strong> implementa estruturas de dados que convergem automaticamente sem coordena√ß√£o:</p>
                <ul>
                    <li>üî¢ <strong>G-Counter</strong> - Contador crescente distribu√≠do</li>
                    <li>‚ûï‚ûñ <strong>PN-Counter</strong> - Contador positivo/negativo</li>
                    <li>üìù <strong>LWW-Register</strong> - Registro Last-Write-Wins</li>
                    <li>üóÇÔ∏è <strong>OR-Set</strong> - Set com adi√ß√£o/remo√ß√£o sem conflitos</li>
                    <li>üìã <strong>LWW-Map</strong> - Mapa com resolu√ß√£o por timestamp</li>
                    <li>üìä <strong>RGA (Replicated Growable Array)</strong> - Array colaborativo</li>
                    <li>‚úÖ <strong>Eventual Consistency</strong> - Converg√™ncia garantida</li>
                    <li>üîÄ <strong>Merge Sem√¢ntico</strong> - Resolu√ß√£o autom√°tica de conflitos</li>
                </ul>
            </div>
        </section>

        <!-- Types -->
        <section class="section">
            <h2 class="section-title">Tipos Dispon√≠veis</h2>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                        <th>Uso Principal</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>GCounter</code></td>
                        <td>Contador crescente distribu√≠do</td>
                        <td>Likes, views, contadores</td>
                    </tr>
                    <tr>
                        <td><code>PNCounter</code></td>
                        <td>Contador positivo/negativo</td>
                        <td>Invent√°rio, saldos</td>
                    </tr>
                    <tr>
                        <td><code>LWWRegister&lt;T&gt;</code></td>
                        <td>Registro com last-write-wins</td>
                        <td>Valores √∫nicos, configs</td>
                    </tr>
                    <tr>
                        <td><code>ORSet&lt;T&gt;</code></td>
                        <td>Set observado-removido</td>
                        <td>Cole√ß√µes distribu√≠das</td>
                    </tr>
                    <tr>
                        <td><code>LWWMap&lt;K, V&gt;</code></td>
                        <td>Mapa com timestamps</td>
                        <td>Configura√ß√µes, metadados</td>
                    </tr>
                    <tr>
                        <td><code>RGA&lt;T&gt;</code></td>
                        <td>Array replicado</td>
                        <td>Listas colaborativas</td>
                    </tr>
                    <tr>
                        <td><code>VectorClock</code></td>
                        <td>Rel√≥gio vetorial</td>
                        <td>Ordena√ß√£o causal</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Examples -->
        <section class="section">
            <h2 class="section-title">Exemplos de Uso</h2>
            
            <h3 style="color: var(--primary-orange); margin-top: 2rem;">G-Counter (Contador Crescente)</h3>
            <div class="code-block">
                <pre><code>use avx_crdt::GCounter;

// N√≥ 1
let mut counter1 = GCounter::new("node1");
counter1.increment();
counter1.increment();
assert_eq!(counter1.value(), 2);

// N√≥ 2
let mut counter2 = GCounter::new("node2");
counter2.increment();
assert_eq!(counter2.value(), 1);

// Merge entre n√≥s
counter1.merge(&counter2);
assert_eq!(counter1.value(), 3); // 2 + 1 = 3</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">PN-Counter (Incremento/Decremento)</h3>
            <div class="code-block">
                <pre><code>use avx_crdt::PNCounter;

let mut counter = PNCounter::new("node1");

// Incrementar e decrementar
counter.increment();
counter.increment();
counter.decrement();

assert_eq!(counter.value(), 1); // 2 - 1 = 1

// Merge com outro n√≥
let counter2 = PNCounter::new("node2");
counter2.increment();

counter.merge(&counter2);
assert_eq!(counter.value(), 2);</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">LWW-Register (Last-Write-Wins)</h3>
            <div class="code-block">
                <pre><code>use avx_crdt::LWWRegister;

let mut reg1 = LWWRegister::new("node1");
reg1.set("Hello", 1000);

let mut reg2 = LWWRegister::new("node2");
reg2.set("World", 2000);

// Merge: "World" vence porque tem timestamp maior
reg1.merge(&reg2);
assert_eq!(reg1.get(), Some("World"));</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">OR-Set (Observed-Remove Set)</h3>
            <div class="code-block">
                <pre><code>use avx_crdt::ORSet;

let mut set1 = ORSet::new("node1");
set1.add("apple");
set1.add("banana");

let mut set2 = ORSet::new("node2");
set2.add("cherry");
set2.remove("apple");

// Merge
set1.merge(&set2);

// Set cont√©m: banana, cherry
// "apple" foi removido
assert!(set1.contains("banana"));
assert!(set1.contains("cherry"));
assert!(!set1.contains("apple"));</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">LWW-Map (Mapa Distribu√≠do)</h3>
            <div class="code-block">
                <pre><code>use avx_crdt::LWWMap;

let mut map1 = LWWMap::new("node1");
map1.set("user", "Alice", 1000);
map1.set("status", "online", 1000);

let mut map2 = LWWMap::new("node2");
map2.set("user", "Bob", 2000); // Vence porque timestamp maior

map1.merge(&map2);
assert_eq!(map1.get("user"), Some(&"Bob"));
assert_eq!(map1.get("status"), Some(&"online"));</code></pre>
            </div>
        </section>

        <!-- API Reference -->
        <section class="section">
            <h2 class="section-title">Refer√™ncia da API</h2>
            
            <h3 style="color: var(--primary-orange);">GCounter</h3>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                        <th>Retorno</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>new(node_id)</code></td>
                        <td>Cria novo contador</td>
                        <td><code>GCounter</code></td>
                    </tr>
                    <tr>
                        <td><code>increment()</code></td>
                        <td>Incrementa contador local</td>
                        <td><code>()</code></td>
                    </tr>
                    <tr>
                        <td><code>value()</code></td>
                        <td>Obt√©m valor total</td>
                        <td><code>u64</code></td>
                    </tr>
                    <tr>
                        <td><code>merge(&other)</code></td>
                        <td>Merge com outro contador</td>
                        <td><code>()</code></td>
                    </tr>
                </tbody>
            </table>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">ORSet&lt;T&gt;</h3>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                        <th>Retorno</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>new(node_id)</code></td>
                        <td>Cria novo set</td>
                        <td><code>ORSet&lt;T&gt;</code></td>
                    </tr>
                    <tr>
                        <td><code>add(item)</code></td>
                        <td>Adiciona item ao set</td>
                        <td><code>()</code></td>
                    </tr>
                    <tr>
                        <td><code>remove(item)</code></td>
                        <td>Remove item do set</td>
                        <td><code>()</code></td>
                    </tr>
                    <tr>
                        <td><code>contains(item)</code></td>
                        <td>Verifica se cont√©m item</td>
                        <td><code>bool</code></td>
                    </tr>
                    <tr>
                        <td><code>merge(&other)</code></td>
                        <td>Merge com outro set</td>
                        <td><code>()</code></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Performance -->
        <section class="section">
            <h2 class="section-title">Performance</h2>
            <div class="animation-showcase">
                <div class="animated-element">
                    üîÑ Converg√™ncia Instant√¢nea
                </div>
                <div style="margin-top: 2rem; text-align: left; max-width: 800px; margin-left: auto; margin-right: auto;">
                    <h3 style="color: var(--primary-orange);">Benchmarks</h3>
                    <table class="api-table">
                        <thead>
                            <tr>
                                <th>Opera√ß√£o</th>
                                <th>Tempo</th>
                                <th>Throughput</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>GCounter Increment</td>
                                <td>~20ns</td>
                                <td>50M ops/s</td>
                            </tr>
                            <tr>
                                <td>ORSet Add</td>
                                <td>~100ns</td>
                                <td>10M ops/s</td>
                            </tr>
                            <tr>
                                <td>LWW-Register Set</td>
                                <td>~50ns</td>
                                <td>20M ops/s</td>
                            </tr>
                            <tr>
                                <td>Merge Operations</td>
                                <td>~500ns</td>
                                <td>2M merges/s</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 style="color: var(--primary-orange); margin-top: 2rem;">Otimiza√ß√µes</h3>
                    <ul>
                        <li>‚úÖ Zero-copy merge quando poss√≠vel</li>
                        <li>‚úÖ Compacta√ß√£o autom√°tica de tombstones</li>
                        <li>‚úÖ Vector clocks otimizados</li>
                        <li>‚úÖ Memory pooling para elementos</li>
                        <li>‚úÖ Serializa√ß√£o bin√°ria eficiente</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Use Cases -->
        <section class="section">
            <h2 class="section-title">Casos de Uso</h2>
            
            <div class="module-card animated-element">
                <h3 class="module-title">üì± Aplicativos Colaborativos</h3>
                <p>Sincronize dados entre m√∫ltiplos dispositivos sem servidor central.</p>
                <div class="code-block">
                    <pre><code>// Dispositivo A
let mut doc = LWWMap::new("device_a");
doc.set("title", "Meu Documento", timestamp());

// Dispositivo B (offline)
let mut doc2 = LWWMap::new("device_b");
doc2.set("content", "Texto...", timestamp());

// Quando reconectar: merge autom√°tico
doc.merge(&doc2);
// Ambos os campos est√£o sincronizados!</code></pre>
                </div>
            </div>

            <div class="module-card animated-element" style="margin-top: 2rem;">
                <h3 class="module-title">üéÆ Sistemas Multi-Player</h3>
                <p>Implemente estado de jogo distribu√≠do com resolu√ß√£o autom√°tica de conflitos.</p>
                <div class="code-block">
                    <pre><code>// Jogador 1: incrementa score
let mut score = GCounter::new("player1");
score.increment(); // +1

// Jogador 2: tamb√©m incrementa
let mut score2 = GCounter::new("player2");
score2.increment(); // +1

// Servidor: merge de ambos
score.merge(&score2);
assert_eq!(score.value(), 2);</code></pre>
                </div>
            </div>

            <div class="module-card animated-element" style="margin-top: 2rem;">
                <h3 class="module-title">üíæ Banco de Dados Distribu√≠do</h3>
                <p>Construa bancos de dados que aceitam escritas em m√∫ltiplos n√≥s simultaneamente.</p>
                <div class="code-block">
                    <pre><code>// N√≥ 1: atualiza usu√°rio
let mut db1 = LWWMap::new("node1");
db1.set("user:123:name", "Alice", timestamp());

// N√≥ 2: atualiza status
let mut db2 = LWWMap::new("node2");
db2.set("user:123:status", "online", timestamp());

// Replica√ß√£o: merge entre n√≥s
db1.merge(&db2);
// Ambos os campos dispon√≠veis em ambos os n√≥s!</code></pre>
                </div>
            </div>
        </section>

        <!-- License -->
        <section class="section">
            <h2 class="section-title">Licen√ßa</h2>
            <div class="code-block">
                <p><strong>Copyright ¬© 2025 N√≠colas √Åvila - Todos os Direitos Reservados</strong></p>
                <p>Este m√≥dulo faz parte do ecossistema propriet√°rio Avx.</p>
                <p>Para uso comercial, entre em contato:</p>
                <ul>
                    <li>üìß Email: nicolas@avila.inc</li>
                    <li>üåê Website: https://avila.inc</li>
                </ul>
            </div>
        </section>
    </div>

    <footer>
        <p>Copyright ¬© 2025 N√≠colas √Åvila - Todos os Direitos Reservados</p>
        <p>avx-crdt - Software Propriet√°rio</p>
    </footer>

    <script src="../assets/js/main.js"></script>
</body>
</html>