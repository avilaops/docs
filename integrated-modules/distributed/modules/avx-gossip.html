<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>avx-gossip - Avx Documentation</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="../index.html" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <span>‚ö°</span>
                    <span>Avx Distributed Systems</span>
                </a>
            </div>
            <div class="nav-controls">
                <button class="theme-toggle" onclick="toggleTheme()">‚òÄÔ∏è Modo Claro</button>
                <div class="language-selector">
                    <button class="language-btn" onclick="toggleLanguageDropdown()">üåç Idioma</button>
                    <div class="language-dropdown"></div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div style="margin-bottom: 2rem;">
            <a href="../index.html" style="color: var(--primary-orange);">‚Üê Voltar</a>
        </div>

        <!-- Module Header -->
        <section class="section">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <span style="font-size: 3rem;">üì¢</span>
                <h1 class="section-title">avx-gossip</h1>
            </div>
            <p style="font-size: 1.2rem; opacity: 0.8;">
                Protocolo de dissemina√ß√£o epid√™mica para propaga√ß√£o eficiente de dados em redes distribu√≠das.
            </p>
        </section>

        <!-- Overview -->
        <section class="section">
            <h2 class="section-title">Vis√£o Geral</h2>
            <div class="code-block">
                <p><strong>avx-gossip</strong> implementa protocolos de gossip inspirados na natureza:</p>
                <ul>
                    <li>ü¶† <strong>Dissemina√ß√£o Epid√™mica</strong> - Propaga√ß√£o como v√≠rus em rede</li>
                    <li>üìä <strong>Probabilistic Broadcast</strong> - Broadcast eficiente com garantias</li>
                    <li>üîÑ <strong>Anti-Entropy</strong> - Sincroniza√ß√£o peri√≥dica de estado</li>
                    <li>üí™ <strong>Toler√¢ncia a Falhas</strong> - Funciona mesmo com 50%+ de n√≥s falhando</li>
                    <li>‚ö° <strong>Baixa Lat√™ncia</strong> - Propaga√ß√£o em O(log n) rounds</li>
                    <li>üìà <strong>Escalabilidade</strong> - Funciona com milhares de n√≥s</li>
                    <li>üéØ <strong>Fanout Configur√°vel</strong> - Controle de propaga√ß√£o</li>
                    <li>üîç <strong>Membership Protocol</strong> - Descoberta de peers din√¢mica</li>
                </ul>
            </div>
        </section>

        <!-- Types -->
        <section class="section">
            <h2 class="section-title">Tipos Dispon√≠veis</h2>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                        <th>Uso Principal</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>GossipEngine</code></td>
                        <td>Motor principal de gossip</td>
                        <td>Dissemina√ß√£o de mensagens</td>
                    </tr>
                    <tr>
                        <td><code>GossipMessage</code></td>
                        <td>Mensagem a ser propagada</td>
                        <td>Dados + metadados</td>
                    </tr>
                    <tr>
                        <td><code>GossipConfig</code></td>
                        <td>Configura√ß√£o do protocolo</td>
                        <td>Par√¢metros de dissemina√ß√£o</td>
                    </tr>
                    <tr>
                        <td><code>PeerList</code></td>
                        <td>Lista de peers conhecidos</td>
                        <td>Membership management</td>
                    </tr>
                    <tr>
                        <td><code>AntiEntropyEngine</code></td>
                        <td>Motor de anti-entropia</td>
                        <td>Sincroniza√ß√£o de estado</td>
                    </tr>
                    <tr>
                        <td><code>MessageDigest</code></td>
                        <td>Resumo de mensagens</td>
                        <td>Detec√ß√£o de diverg√™ncias</td>
                    </tr>
                    <tr>
                        <td><code>GossipMetrics</code></td>
                        <td>M√©tricas de propaga√ß√£o</td>
                        <td>Observabilidade</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Examples -->
        <section class="section">
            <h2 class="section-title">Exemplos de Uso</h2>
            
            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Configura√ß√£o B√°sica</h3>
            <div class="code-block">
                <pre><code>use avx_gossip::{GossipEngine, GossipConfig};

let config = GossipConfig {
    fanout: 3,              // Propagar para 3 peers por round
    interval_ms: 1000,      // Gossip a cada 1 segundo
    max_transmissions: 3,   // Retransmitir no m√°ximo 3 vezes
};

let mut engine = GossipEngine::with_config(config);

// Adicionar peers conhecidos
engine.add_peer("192.168.1.100:8000")?;
engine.add_peer("192.168.1.101:8000")?;
engine.add_peer("192.168.1.102:8000")?;</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Broadcast de Mensagem</h3>
            <div class="code-block">
                <pre><code>use avx_gossip::{GossipMessage, MessageType};

let message = GossipMessage::new(
    MessageType::UserData,
    b"Important update".to_vec()
);

// Iniciar dissemina√ß√£o
engine.broadcast(message)?;

// Mensagem ser√° propagada para toda a rede
// em O(log n) rounds com alta probabilidade</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Receber Mensagens</h3>
            <div class="code-block">
                <pre><code>use avx_gossip::MessageHandler;

struct MyHandler;

impl MessageHandler for MyHandler {
    fn handle_message(&self, msg: &GossipMessage) {
        match msg.message_type {
            MessageType::UserData => {
                println!("Dados recebidos: {:?}", msg.payload);
            }
            MessageType::ClusterUpdate => {
                println!("Atualiza√ß√£o de cluster");
            }
            _ => {}
        }
    }
}

// Registrar handler
engine.register_handler(MyHandler);</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Anti-Entropy (Sincroniza√ß√£o)</h3>
            <div class="code-block">
                <pre><code>use avx_gossip::AntiEntropyEngine;

let mut anti_entropy = AntiEntropyEngine::new();

// Configurar sincroniza√ß√£o peri√≥dica
anti_entropy.set_interval(Duration::from_secs(30));

// Iniciar processo de anti-entropia
anti_entropy.start()?;

// Periodicamente:
// 1. Escolhe peer aleat√≥rio
// 2. Troca digests de mensagens
// 3. Sincroniza diferen√ßas</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Membership Management</h3>
            <div class="code-block">
                <pre><code>use avx_gossip::PeerList;

let mut peers = PeerList::new();

// Adicionar peers
peers.add("192.168.1.100:8000")?;
peers.add("192.168.1.101:8000")?;

// Marcar peer como falho
peers.mark_failed("192.168.1.100:8000")?;

// Selecionar peers aleat√≥rios para gossip
let selected = peers.select_random(3)?;

// Peers falhados s√£o automaticamente exclu√≠dos</code></pre>
            </div>
        </section>

        <!-- API Reference -->
        <section class="section">
            <h2 class="section-title">Refer√™ncia da API</h2>
            
            <h3 style="color: var(--primary-orange);">GossipEngine</h3>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                        <th>Retorno</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>new()</code></td>
                        <td>Cria engine com config padr√£o</td>
                        <td><code>GossipEngine</code></td>
                    </tr>
                    <tr>
                        <td><code>with_config(config)</code></td>
                        <td>Cria com config customizada</td>
                        <td><code>GossipEngine</code></td>
                    </tr>
                    <tr>
                        <td><code>broadcast(message)</code></td>
                        <td>Inicia dissemina√ß√£o</td>
                        <td><code>Result&lt;()&gt;</code></td>
                    </tr>
                    <tr>
                        <td><code>add_peer(addr)</code></td>
                        <td>Adiciona peer conhecido</td>
                        <td><code>Result&lt;()&gt;</code></td>
                    </tr>
                    <tr>
                        <td><code>register_handler(h)</code></td>
                        <td>Registra message handler</td>
                        <td><code>()</code></td>
                    </tr>
                    <tr>
                        <td><code>get_metrics()</code></td>
                        <td>Obt√©m m√©tricas</td>
                        <td><code>GossipMetrics</code></td>
                    </tr>
                </tbody>
            </table>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">GossipMessage</h3>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                        <th>Retorno</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>new(type, payload)</code></td>
                        <td>Cria nova mensagem</td>
                        <td><code>GossipMessage</code></td>
                    </tr>
                    <tr>
                        <td><code>with_ttl(ttl)</code></td>
                        <td>Define TTL</td>
                        <td><code>Self</code></td>
                    </tr>
                    <tr>
                        <td><code>is_expired()</code></td>
                        <td>Verifica se expirou</td>
                        <td><code>bool</code></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Performance -->
        <section class="section">
            <h2 class="section-title">Performance</h2>
            <div class="animation-showcase">
                <div class="animated-element">
                    üì¢ Dissemina√ß√£o Massiva
                </div>
                <div style="margin-top: 2rem; text-align: left; max-width: 800px; margin-left: auto; margin-right: auto;">
                    <h3 style="color: var(--primary-orange);">Benchmarks</h3>
                    <table class="api-table">
                        <thead>
                            <tr>
                                <th>Opera√ß√£o</th>
                                <th>Tempo</th>
                                <th>Throughput</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Broadcast Initiation</td>
                                <td>~10Œºs</td>
                                <td>100K broadcasts/s</td>
                            </tr>
                            <tr>
                                <td>Message Processing</td>
                                <td>~50Œºs</td>
                                <td>20K msgs/s</td>
                            </tr>
                            <tr>
                                <td>Peer Selection</td>
                                <td>~100ns</td>
                                <td>10M selections/s</td>
                            </tr>
                            <tr>
                                <td>Anti-Entropy Round</td>
                                <td>~10ms</td>
                                <td>100 rounds/s</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 style="color: var(--primary-orange); margin-top: 2rem;">Otimiza√ß√µes</h3>
                    <ul>
                        <li>‚úÖ Zero-copy message forwarding</li>
                        <li>‚úÖ Bloom filters para deduplica√ß√£o</li>
                        <li>‚úÖ Connection pooling</li>
                        <li>‚úÖ Batching de mensagens</li>
                        <li>‚úÖ Async I/O com Tokio</li>
                    </ul>

                    <h3 style="color: var(--primary-orange); margin-top: 2rem;">Garantias</h3>
                    <ul>
                        <li>‚úÖ Propaga√ß√£o em O(log n) rounds</li>
                        <li>‚úÖ 99.9% de cobertura com fanout=3</li>
                        <li>‚úÖ Toler√¢ncia a 50%+ de falhas</li>
                        <li>‚úÖ Eventual delivery garantido</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Use Cases -->
        <section class="section">
            <h2 class="section-title">Casos de Uso</h2>
            
            <div class="module-card animated-element">
                <h3 class="module-title">üì° Cluster Membership</h3>
                <p>Disseminar informa√ß√µes de membership em clusters din√¢micos.</p>
                <div class="code-block">
                    <pre><code>// Novo n√≥ entra no cluster
let join_msg = GossipMessage::new(
    MessageType::NodeJoined,
    bincode::serialize(&node_info)?
);

engine.broadcast(join_msg)?;

// Todos os n√≥s s√£o notificados rapidamente
// sem necessidade de broadcast tradicional</code></pre>
                </div>
            </div>

            <div class="module-card animated-element" style="margin-top: 2rem;">
                <h3 class="module-title">üîÑ Sincroniza√ß√£o de Configura√ß√£o</h3>
                <p>Propagar mudan√ßas de configura√ß√£o para todos os n√≥s.</p>
                <div class="code-block">
                    <pre><code>// Atualiza√ß√£o de configura√ß√£o
let config_msg = GossipMessage::new(
    MessageType::ConfigUpdate,
    serde_json::to_vec(&new_config)?
);

engine.broadcast(config_msg)?;

// Configura√ß√£o propaga para toda a rede
// N√≥s aplicam mudan√ßa quando recebem</code></pre>
                </div>
            </div>

            <div class="module-card animated-element" style="margin-top: 2rem;">
                <h3 class="module-title">üö® Sistema de Alertas</h3>
                <p>Disseminar alertas cr√≠ticos rapidamente por toda a infraestrutura.</p>
                <div class="code-block">
                    <pre><code>// Alerta cr√≠tico detectado
let alert = GossipMessage::new(
    MessageType::Alert,
    serde_json::to_vec(&Alert {
        level: AlertLevel::Critical,
        message: "High CPU usage".into(),
    })?
);

engine.broadcast(alert)?;

// Todos os n√≥s notificados em segundos</code></pre>
                </div>
            </div>
        </section>

        <!-- License -->
        <section class="section">
            <h2 class="section-title">Licen√ßa</h2>
            <div class="code-block">
                <p><strong>Copyright ¬© 2025 N√≠colas √Åvila - Todos os Direitos Reservados</strong></p>
                <p>Este m√≥dulo faz parte do ecossistema propriet√°rio Avx.</p>
                <p>Para uso comercial, entre em contato:</p>
                <ul>
                    <li>üìß Email: nicolas@avila.inc</li>
                    <li>üåê Website: https://avila.inc</li>
                </ul>
            </div>
        </section>
    </div>

    <footer>
        <p>Copyright ¬© 2025 N√≠colas √Åvila - Todos os Direitos Reservados</p>
        <p>avx-gossip - Software Propriet√°rio</p>
    </footer>

    <script src="../assets/js/main.js"></script>
</body>
</html>