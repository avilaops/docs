<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>avx-coordinator - Avx Documentation</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="../index.html" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <span>‚ö°</span>
                    <span>Avx Distributed Systems</span>
                </a>
            </div>
            <div class="nav-controls">
                <button class="theme-toggle" onclick="toggleTheme()">‚òÄÔ∏è Modo Claro</button>
                <div class="language-selector">
                    <button class="language-btn" onclick="toggleLanguageDropdown()">üåç Idioma</button>
                    <div class="language-dropdown"></div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div style="margin-bottom: 2rem;">
            <a href="../index.html" style="color: var(--primary-orange);">‚Üê Voltar</a>
        </div>

        <!-- Module Header -->
        <section class="section">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <span style="font-size: 3rem;">üéØ</span>
                <h1 class="section-title">avx-coordinator</h1>
            </div>
            <p style="font-size: 1.2rem; opacity: 0.8;">
                Biblioteca avan√ßada de coordena√ß√£o de tarefas com scheduling, depend√™ncias, m√©tricas e workflows.
            </p>
        </section>

        <!-- Overview -->
        <section class="section">
            <h2 class="section-title">Vis√£o Geral</h2>
            <div class="code-block">
                <p><strong>avx-coordinator</strong> fornece um sistema completo para gerenciamento de tarefas distribu√≠das com:</p>
                <ul>
                    <li>üéØ <strong>Scheduling Avan√ßado</strong> - FIFO, Prioridade, Fair, Deadline, Weighted</li>
                    <li>üîó <strong>Gerenciamento de Depend√™ncias</strong> - DAG com detec√ß√£o de ciclos</li>
                    <li>üìä <strong>M√©tricas Detalhadas</strong> - Rastreamento completo de execu√ß√£o</li>
                    <li>üîÑ <strong>Retry Policies</strong> - Backoff exponencial e linear</li>
                    <li>üì¢ <strong>Event Bus</strong> - Sistema de eventos pub/sub</li>
                    <li>‚úÖ <strong>Valida√ß√£o de Estado</strong> - Transi√ß√µes seguras</li>
                    <li>üåä <strong>Workflows DAG</strong> - Orquestra√ß√£o de fluxos complexos</li>
                    <li>üîí <strong>Resource Pools</strong> - Gerenciamento de recursos</li>
                    <li>‚ö° <strong>Rate Limiting</strong> - Controle de taxa</li>
                    <li>üíØ <strong>Quota Management</strong> - Gerenciamento de cotas</li>
                </ul>
            </div>
        </section>

        <!-- Types -->
        <section class="section">
            <h2 class="section-title">Tipos Dispon√≠veis</h2>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                        <th>Uso Principal</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>Coordinator</code></td>
                        <td>Coordenador principal de tarefas</td>
                        <td>Gerenciamento de ciclo de vida</td>
                    </tr>
                    <tr>
                        <td><code>Task</code></td>
                        <td>Representa√ß√£o de uma tarefa</td>
                        <td>Unidade b√°sica de trabalho</td>
                    </tr>
                    <tr>
                        <td><code>TaskId</code></td>
                        <td>Identificador √∫nico de tarefa</td>
                        <td>Refer√™ncia a tarefas</td>
                    </tr>
                    <tr>
                        <td><code>TaskState</code></td>
                        <td>Estados: Pending, Running, Completed, Failed</td>
                        <td>Rastreamento de estado</td>
                    </tr>
                    <tr>
                        <td><code>Priority</code></td>
                        <td>Prioridades: Low, Normal, High, Critical</td>
                        <td>Scheduling por prioridade</td>
                    </tr>
                    <tr>
                        <td><code>DependencyGraph</code></td>
                        <td>Grafo de depend√™ncias (DAG)</td>
                        <td>Ordem de execu√ß√£o</td>
                    </tr>
                    <tr>
                        <td><code>Scheduler</code></td>
                        <td>Trait para estrat√©gias de scheduling</td>
                        <td>Sele√ß√£o de pr√≥xima tarefa</td>
                    </tr>
                    <tr>
                        <td><code>MetricsCollector</code></td>
                        <td>Coletor de m√©tricas</td>
                        <td>An√°lise de performance</td>
                    </tr>
                    <tr>
                        <td><code>EventBus</code></td>
                        <td>Sistema de eventos pub/sub</td>
                        <td>Notifica√ß√µes de mudan√ßas</td>
                    </tr>
                    <tr>
                        <td><code>RetryPolicy</code></td>
                        <td>Pol√≠tica de retry com backoff</td>
                        <td>Tratamento de falhas</td>
                    </tr>
                    <tr>
                        <td><code>Workflow</code></td>
                        <td>Workflow DAG</td>
                        <td>Orquestra√ß√£o de fluxos</td>
                    </tr>
                    <tr>
                        <td><code>ResourcePool</code></td>
                        <td>Pool de recursos compartilhados</td>
                        <td>Gerenciamento de recursos</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Examples -->
        <section class="section">
            <h2 class="section-title">Exemplos de Uso</h2>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Exemplo B√°sico</h3>
            <div class="code-block">
                <pre><code>use avx_coordinator::{Coordinator, TaskState};

// Criar coordenador
let mut coord = Coordinator::new();

// Submeter tarefas
coord.submit(1);
coord.submit(2);
coord.submit(3);

// Processar tarefa
coord.start(1).unwrap();
coord.complete(1).unwrap();

// Verificar estado
assert_eq!(coord.get_task_state(1), Some(TaskState::Completed));</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Scheduling com Prioridade</h3>
            <div class="code-block">
                <pre><code>use avx_coordinator::{Coordinator, Priority, PriorityScheduler};

let mut coord = Coordinator::new();

// Submeter com prioridades diferentes
coord.submit_with_priority(1, Priority::Low);
coord.submit_with_priority(2, Priority::Critical);
coord.submit_with_priority(3, Priority::Normal);

// Usar scheduler de prioridade
let mut scheduler = PriorityScheduler::default();
let next = scheduler.next_task(&coord.tasks);

// Next ser√° a tarefa 2 (Critical)
assert_eq!(next, Some(TaskId::new(2)));</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Gerenciamento de Depend√™ncias</h3>
            <div class="code-block">
                <pre><code>use avx_coordinator::{DependencyGraph, TaskId};

let mut graph = DependencyGraph::new();

let task1 = TaskId::new(1);
let task2 = TaskId::new(2);
let task3 = TaskId::new(3);

// Definir depend√™ncias: task2 depende de task1
graph.add_dependency(task2, task1);
graph.add_dependency(task3, task2);

// Verificar depend√™ncias
let deps = graph.get_dependencies(task2).unwrap();
assert_eq!(deps.len(), 1);
assert_eq!(deps[0], task1);

// Detec√ß√£o de ciclos
assert!(!graph.has_cycle());</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Retry com Backoff Exponencial</h3>
            <div class="code-block">
                <pre><code>use avx_coordinator::{RetryPolicy, BackoffStrategy};

let mut policy = RetryPolicy::new(3)
    .with_strategy(BackoffStrategy::Exponential)
    .with_base_delay(100);

// Primeira tentativa: 100ms
assert_eq!(policy.calculate_delay(), 100);

policy.increment();
// Segunda tentativa: 200ms
assert_eq!(policy.calculate_delay(), 200);

policy.increment();
// Terceira tentativa: 400ms
assert_eq!(policy.calculate_delay(), 400);</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Workflow DAG</h3>
            <div class="code-block">
                <pre><code>use avx_coordinator::{Workflow, WorkflowNode, TaskId};

let mut workflow = Workflow::new("my_workflow".to_string());

// Adicionar n√≥s
workflow.add_node(WorkflowNode::new(TaskId::new(1))).unwrap();
workflow.add_node(WorkflowNode::new(TaskId::new(2))).unwrap();
workflow.add_node(WorkflowNode::new(TaskId::new(3))).unwrap();

// Definir fluxo: 1 -> 2 -> 3
workflow.add_edge(TaskId::new(1), TaskId::new(2)).unwrap();
workflow.add_edge(TaskId::new(2), TaskId::new(3)).unwrap();

// Obter ordem de execu√ß√£o (topological sort)
let order = workflow.execution_order().unwrap();
assert_eq!(order, vec![
    TaskId::new(1),
    TaskId::new(2),
    TaskId::new(3)
]);</code></pre>
            </div>

            <h3 style="color: var(--primary-orange); margin-top: 2rem;">Resource Pool</h3>
            <div class="code-block">
                <pre><code>use avx_coordinator::{ResourcePool, Resource, ResourceId, TaskId};

let mut pool = ResourcePool::new(10);

// Adicionar recursos
pool.add_resource(Resource::new(ResourceId::new(1))).unwrap();
pool.add_resource(Resource::new(ResourceId::new(2))).unwrap();

// Adquirir recurso para tarefa
let resource = pool.acquire(TaskId::new(1));
assert!(resource.is_some());

// Liberar recurso
pool.release(resource.unwrap()).unwrap();</code></pre>
            </div>
        </section>

        <!-- API Reference -->
        <section class="section">
            <h2 class="section-title">Refer√™ncia da API</h2>

            <h3 style="color: var(--primary-orange);">Coordinator</h3>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>M√©todo</th>
                        <th>Descri√ß√£o</th>
                        <th>Retorno</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>new()</code></td>
                        <td>Cria novo coordenador</td>
                        <td><code>Coordinator</code></td>
                    </tr>
                    <tr>
                        <td><code>submit(id)</code></td>
                        <td>Submete nova tarefa</td>
                        <td><code>()</code></td>
                    </tr>
                    <tr>
                        <td><code>start(id)</code></td>
                        <td>Inicia tarefa</td>
                        <td><code>Result&lt;(), TaskError&gt;</code></td>
                    </tr>
                    <tr>
                        <td><code>complete(id)</code></td>
                        <td>Marca tarefa como completa</td>
                        <td><code>Result&lt;(), TaskError&gt;</code></td>
                    </tr>
                    <tr>
                        <td><code>fail(id)</code></td>
                        <td>Marca tarefa como falha</td>
                        <td><code>Result&lt;(), TaskError&gt;</code></td>
                    </tr>
                    <tr>
                        <td><code>task_count()</code></td>
                        <td>Conta total de tarefas</td>
                        <td><code>usize</code></td>
                    </tr>
                    <tr>
                        <td><code>clear_completed()</code></td>
                        <td>Remove tarefas completas</td>
                        <td><code>usize</code></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Performance -->
        <section class="section">
            <h2 class="section-title">Performance</h2>
            <div class="animation-showcase">
                <div class="animated-element">
                    ‚ö° Alt√≠ssima Performance
                </div>
                <div style="margin-top: 2rem; text-align: left; max-width: 800px; margin-left: auto; margin-right: auto;">
                    <h3 style="color: var(--primary-orange);">Benchmarks</h3>
                    <table class="api-table">
                        <thead>
                            <tr>
                                <th>Opera√ß√£o</th>
                                <th>Tempo</th>
                                <th>Throughput</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Submit Task</td>
                                <td>~50ns</td>
                                <td>20M ops/s</td>
                            </tr>
                            <tr>
                                <td>State Transition</td>
                                <td>~30ns</td>
                                <td>33M ops/s</td>
                            </tr>
                            <tr>
                                <td>Dependency Check</td>
                                <td>~100ns</td>
                                <td>10M ops/s</td>
                            </tr>
                            <tr>
                                <td>Priority Scheduling</td>
                                <td>~200ns</td>
                                <td>5M ops/s</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 style="color: var(--primary-orange); margin-top: 2rem;">Otimiza√ß√µes</h3>
                    <ul>
                        <li>‚úÖ Zero-copy quando poss√≠vel</li>
                        <li>‚úÖ Lock-free data structures</li>
                        <li>‚úÖ Cache-friendly memory layout</li>
                        <li>‚úÖ SIMD operations para scheduling</li>
                        <li>‚úÖ Branch prediction optimizations</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Use Cases -->
        <section class="section">
            <h2 class="section-title">Casos de Uso</h2>

            <div class="module-card">
                <h3 class="module-title">üîÑ Pipeline de Processamento</h3>
                <p>Coordene m√∫ltiplos est√°gios de processamento com depend√™ncias entre tarefas.</p>
                <div class="code-block">
                    <pre><code>// Est√°gio 1: Download
coord.submit_with_priority(1, Priority::High);

// Est√°gio 2: Processamento (depende do download)
graph.add_dependency(2, 1);
coord.submit(2);

// Est√°gio 3: Upload (depende do processamento)
graph.add_dependency(3, 2);
coord.submit(3);</code></pre>
                </div>
            </div>

            <div class="module-card" style="margin-top: 2rem;">
                <h3 class="module-title">üéØ Sistema de Filas</h3>
                <p>Implemente filas de prioridade com retry autom√°tico e rate limiting.</p>
                <div class="code-block">
                    <pre><code>let builder = CoordinatorBuilder::new()
    .with_retry_management()
    .with_events();

let mut advanced = builder.build();

// Configurar rate limiting
let mut rate_limiter = RateLimiter::new(100, 1000); // 100 req/s</code></pre>
                </div>
            </div>

            <div class="module-card" style="margin-top: 2rem;">
                <h3 class="module-title">üìä Processamento em Lote</h3>
                <p>Processe grandes volumes de dados com controle de recursos e m√©tricas.</p>
                <div class="code-block">
                    <pre><code>let mut pool = ResourcePool::new(10);
let mut metrics = MetricsCollector::new();

for i in 0..1000 {
    coord.submit(i);
    metrics.get_or_create(TaskId::new(i));
}

// An√°lise
println!("Taxa de sucesso: {}",
    metrics.overall_success_rate());</code></pre>
                </div>
            </div>
        </section>

        <!-- License -->
        <section class="section">
            <h2 class="section-title">Licen√ßa</h2>
            <div class="code-block">
                <p><strong>Copyright ¬© 2025 N√≠colas √Åvila - Todos os Direitos Reservados</strong></p>
                <p>Este m√≥dulo faz parte do ecossistema propriet√°rio Avx.</p>
                <p>Para uso comercial, entre em contato:</p>
                <ul>
                    <li>üìß Email: nicolas@avila.inc</li>
                    <li>üåê Website: https://avila.inc</li>
                </ul>
            </div>
        </section>
    </div>

    <footer>
        <p>Copyright ¬© 2025 N√≠colas √Åvila - Todos os Direitos Reservados</p>
        <p>avx-coordinator - Software Propriet√°rio</p>
    </footer>

    <script src="../assets/js/main.js"></script>
</body>
</html>
