<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AVX LoadBalancer - Balanceador de carga de alta performance">
    <title>AVX LoadBalancer - Documenta√ß√£o</title>
    <link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo"><a href="../index.html" style="text-decoration:none;color:inherit;">AVX Network</a></div>
                <div class="controls">
                    <button id="theme-toggle" class="theme-toggle">üåô</button>
                    <select id="lang-select" class="lang-select">
                        <option value="pt-BR">üáßüá∑ Portugu√™s</option>
                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                        <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                        <option value="zh-TW">üáπüáº ÁπÅÈ´î‰∏≠Êñá</option>
                        <option value="ur">üáµüá∞ ÿßÿ±ÿØŸà</option>
                        <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                        <option value="de">üá©üá™ Deutsch</option>
                        <option value="lv">üá±üáª Latvie≈°u</option>
                        <option value="uz">üá∫üáø O'zbek</option>
                        <option value="es">üá™üá∏ Espa√±ol</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul class="nav-links">
                <li><a href="#overview">Vis√£o Geral</a></li>
                <li><a href="#types">Tipos Dispon√≠veis</a></li>
                <li><a href="#examples">Exemplos</a></li>
                <li><a href="#api">API</a></li>
                <li><a href="#performance">Performance</a></li>
                <li><a href="#usecases">Casos de Uso</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <div class="container">
            <div class="hero">
                <h1>‚öñÔ∏è AVX LoadBalancer</h1>
                <p>Balanceador de carga de alta performance com health checks e failover autom√°tico</p>
            </div>

            <section id="overview" class="section fade-in">
                <h2>üìã Vis√£o Geral</h2>
                <p>AVX LoadBalancer √© um balanceador de carga completo e inteligente, oferecendo m√∫ltiplas estrat√©gias de distribui√ß√£o, health checks autom√°ticos, geo-routing, sticky sessions, hot reload de configura√ß√£o, STUN/TURN para WebRTC e integra√ß√£o com OpenTelemetry.</p>

                <div class="modules-grid mt-3">
                    <div class="module-card">
                        <h3>‚ö° Alta Performance</h3>
                        <p>200k+ conex√µes/s com lat√™ncia m√≠nima e zero-copy forwarding</p>
                    </div>
                    <div class="module-card">
                        <h3>üîí Resiliente</h3>
                        <p>Health checks, failover autom√°tico e circuit breaker integrado</p>
                    </div>
                    <div class="module-card">
                        <h3>üéØ Inteligente</h3>
                        <p>Geo-routing, sticky sessions e balanceamento por peso</p>
                    </div>
                    <div class="module-card">
                        <h3>üöÄ Flex√≠vel</h3>
                        <p>Round-robin, least connections, IP hash e weighted strategies</p>
                    </div>
                </div>
            </section>

            <section id="types" class="section fade-in">
                <h2>üì¶ Tipos Dispon√≠veis</h2>

                <h3>Core</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Tipo</th>
                            <th>Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>LoadBalancer</code></td>
                            <td>Balanceador de carga principal</td>
                        </tr>
                        <tr>
                            <td><code>Backend</code></td>
                            <td>Servidor backend com health status</td>
                        </tr>
                        <tr>
                            <td><code>HealthCheck</code></td>
                            <td>Sistema de health checks autom√°ticos</td>
                        </tr>
                        <tr>
                            <td><code>Config</code></td>
                            <td>Configura√ß√£o do load balancer</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="mt-3">Estrat√©gias de Balanceamento</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Estrat√©gia</th>
                            <th>Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>RoundRobin</code></td>
                            <td>Distribui√ß√£o sequencial entre backends</td>
                        </tr>
                        <tr>
                            <td><code>LeastConnections</code></td>
                            <td>Roteia para backend com menos conex√µes</td>
                        </tr>
                        <tr>
                            <td><code>IpHash</code></td>
                            <td>Consist√™ncia baseada em IP do cliente</td>
                        </tr>
                        <tr>
                            <td><code>WeightedRoundRobin</code></td>
                            <td>Round-robin com pesos por backend</td>
                        </tr>
                        <tr>
                            <td><code>Random</code></td>
                            <td>Sele√ß√£o aleat√≥ria de backend</td>
                        </tr>
                        <tr>
                            <td><code>LeastResponseTime</code></td>
                            <td>Roteia para backend mais r√°pido</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="mt-3">Features Avan√ßadas</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>GeoRouter</code></td>
                            <td>Roteamento baseado em geolocaliza√ß√£o</td>
                        </tr>
                        <tr>
                            <td><code>StickySession</code></td>
                            <td>Afinidade de sess√£o com cookies</td>
                        </tr>
                        <tr>
                            <td><code>HotReload</code></td>
                            <td>Recarga de configura√ß√£o sem downtime</td>
                        </tr>
                        <tr>
                            <td><code>StunTurn</code></td>
                            <td>Servidor STUN/TURN para WebRTC</td>
                        </tr>
                        <tr>
                            <td><code>TlsTermination</code></td>
                            <td>Termina√ß√£o SSL/TLS na borda</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="examples" class="section fade-in">
                <h2>üí° Exemplos de Uso</h2>

                <h3>LoadBalancer B√°sico (Round Robin)</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, Backend};

#[tokio::main]
async fn main() -> Result<()> {
    let backends = vec![
        Backend::new("http://backend-1:8080"),
        Backend::new("http://backend-2:8080"),
        Backend::new("http://backend-3:8080"),
    ];

    let lb = LoadBalancer::builder()
        .backends(backends)
        .strategy(Strategy::RoundRobin)
        .bind("0.0.0.0:80")
        .serve()
        .await?;

    Ok(())
}</code></pre>

                <h3>Least Connections Strategy</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, Backend, Strategy};

let backends = vec![
    Backend::new("http://backend-1:8080"),
    Backend::new("http://backend-2:8080"),
    Backend::new("http://backend-3:8080"),
];

let lb = LoadBalancer::builder()
    .backends(backends)
    .strategy(Strategy::LeastConnections)
    .bind("0.0.0.0:80")
    .serve()
    .await?;</code></pre>

                <h3>Weighted Round Robin</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, Backend, Strategy};

let backends = vec![
    Backend::new("http://backend-1:8080").weight(5),  // 50% do tr√°fego
    Backend::new("http://backend-2:8080").weight(3),  // 30% do tr√°fego
    Backend::new("http://backend-3:8080").weight(2),  // 20% do tr√°fego
];

let lb = LoadBalancer::builder()
    .backends(backends)
    .strategy(Strategy::WeightedRoundRobin)
    .bind("0.0.0.0:80")
    .serve()
    .await?;</code></pre>

                <h3>Com Health Checks</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, Backend, HealthCheck};
use std::time::Duration;

let health_check = HealthCheck::builder()
    .interval(Duration::from_secs(5))
    .timeout(Duration::from_secs(2))
    .unhealthy_threshold(3)
    .healthy_threshold(2)
    .path("/health")
    .build();

let lb = LoadBalancer::builder()
    .backends(backends)
    .health_check(health_check)
    .bind("0.0.0.0:80")
    .serve()
    .await?;</code></pre>

                <h3>Sticky Sessions (Afinidade de Sess√£o)</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, StickySession};
use std::time::Duration;

let sticky = StickySession::builder()
    .cookie_name("AVX_SESSION")
    .ttl(Duration::from_secs(3600))
    .secure(true)
    .build();

let lb = LoadBalancer::builder()
    .backends(backends)
    .sticky_session(sticky)
    .bind("0.0.0.0:80")
    .serve()
    .await?;</code></pre>

                <h3>Geo-Routing (Roteamento Geogr√°fico)</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, GeoRouter, Region};

let geo_router = GeoRouter::builder()
    .region(Region::US, vec![
        "http://us-east-1:8080",
        "http://us-west-1:8080",
    ])
    .region(Region::EU, vec![
        "http://eu-west-1:8080",
        "http://eu-central-1:8080",
    ])
    .region(Region::ASIA, vec![
        "http://ap-southeast-1:8080",
        "http://ap-northeast-1:8080",
    ])
    .default_region(Region::US)
    .build();

let lb = LoadBalancer::builder()
    .geo_router(geo_router)
    .bind("0.0.0.0:80")
    .serve()
    .await?;</code></pre>

                <h3>Hot Reload de Configura√ß√£o</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, HotReload};

let hot_reload = HotReload::builder()
    .config_file("config.yaml")
    .watch_interval(Duration::from_secs(10))
    .on_reload(|new_config| {
        println!("Configura√ß√£o recarregada!");
    })
    .build();

let lb = LoadBalancer::builder()
    .hot_reload(hot_reload)
    .bind("0.0.0.0:80")
    .serve()
    .await?;</code></pre>

                <h3>TLS Termination</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, TlsConfig};

let tls = TlsConfig::builder()
    .cert_path("cert.pem")
    .key_path("key.pem")
    .min_version(TlsVersion::TLS13)
    .build();

let lb = LoadBalancer::builder()
    .backends(backends)
    .tls(tls)
    .bind("0.0.0.0:443")
    .serve()
    .await?;</code></pre>

                <h3>STUN/TURN Server para WebRTC</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, StunTurn};

let stun_turn = StunTurn::builder()
    .stun_port(3478)
    .turn_port(3479)
    .realm("avx.example.com")
    .credentials(vec![
        ("user1", "password1"),
        ("user2", "password2"),
    ])
    .build();

let lb = LoadBalancer::builder()
    .stun_turn(stun_turn)
    .bind("0.0.0.0:80")
    .serve()
    .await?;</code></pre>

                <h3>Observabilidade com OpenTelemetry</h3>
                <pre><code>use avx_loadbalancer::{LoadBalancer, Telemetry};

let telemetry = Telemetry::builder()
    .jaeger_endpoint("http://jaeger:14268/api/traces")
    .service_name("avx-loadbalancer")
    .metrics_port(9090)
    .build();

let lb = LoadBalancer::builder()
    .backends(backends)
    .telemetry(telemetry)
    .bind("0.0.0.0:80")
    .serve()
    .await?;</code></pre>

                <h3>LoadBalancer Completo (Produ√ß√£o)</h3>
                <pre><code>use avx_loadbalancer::*;
use std::time::Duration;

#[tokio::main]
async fn main() -> Result<()> {
    // Backends com pesos
    let backends = vec![
        Backend::new("http://backend-1:8080").weight(5),
        Backend::new("http://backend-2:8080").weight(3),
        Backend::new("http://backend-3:8080").weight(2),
    ];

    // Health checks
    let health_check = HealthCheck::builder()
        .interval(Duration::from_secs(5))
        .timeout(Duration::from_secs(2))
        .path("/health")
        .build();

    // Sticky sessions
    let sticky = StickySession::builder()
        .cookie_name("AVX_SESSION")
        .ttl(Duration::from_secs(3600))
        .build();

    // Geo-routing
    let geo_router = GeoRouter::builder()
        .region(Region::US, vec!["http://us-1:8080"])
        .region(Region::EU, vec!["http://eu-1:8080"])
        .build();

    // TLS
    let tls = TlsConfig::builder()
        .cert_path("cert.pem")
        .key_path("key.pem")
        .build();

    // Hot reload
    let hot_reload = HotReload::from_file("config.yaml");

    // Telemetry
    let telemetry = Telemetry::jaeger("http://jaeger:14268/api/traces");

    // Criar load balancer
    let lb = LoadBalancer::builder()
        .backends(backends)
        .strategy(Strategy::WeightedRoundRobin)
        .health_check(health_check)
        .sticky_session(sticky)
        .geo_router(geo_router)
        .tls(tls)
        .hot_reload(hot_reload)
        .telemetry(telemetry)
        .max_connections(100000)
        .bind("0.0.0.0:443")
        .serve()
        .await?;

    Ok(())
}</code></pre>
            </section>

            <section id="api" class="section fade-in">
                <h2>üìö Refer√™ncias da API</h2>

                <h3>LoadBalancer</h3>
                <div class="module-card">
                    <h4><code>LoadBalancer::builder() -> LoadBalancerBuilder</code></h4>
                    <p>Cria construtor de load balancer para configura√ß√£o completa.</p>
                </div>

                <div class="module-card">
                    <h4><code>LoadBalancerBuilder::backends(backends: Vec&lt;Backend&gt;) -> Self</code></h4>
                    <p>Define lista de servidores backend para balanceamento.</p>
                </div>

                <div class="module-card">
                    <h4><code>LoadBalancerBuilder::strategy(strategy: Strategy) -> Self</code></h4>
                    <p>Define estrat√©gia de balanceamento (RoundRobin, LeastConnections, etc).</p>
                </div>

                <div class="module-card">
                    <h4><code>LoadBalancer::serve() -> Result&lt;()&gt;</code></h4>
                    <p>Inicia o load balancer e processa conex√µes.</p>
                </div>

                <h3 class="mt-3">Backend</h3>
                <div class="module-card">
                    <h4><code>Backend::new(url: &str) -> Self</code></h4>
                    <p>Cria novo backend com URL especificada.</p>
                </div>

                <div class="module-card">
                    <h4><code>Backend::weight(self, weight: u32) -> Self</code></h4>
                    <p>Define peso do backend para weighted strategies.</p>
                </div>

                <div class="module-card">
                    <h4><code>Backend::max_connections(self, max: u32) -> Self</code></h4>
                    <p>Define limite m√°ximo de conex√µes para este backend.</p>
                </div>

                <h3 class="mt-3">HealthCheck</h3>
                <div class="module-card">
                    <h4><code>HealthCheck::builder() -> HealthCheckBuilder</code></h4>
                    <p>Cria construtor de health check.</p>
                </div>

                <div class="module-card">
                    <h4><code>HealthCheckBuilder::interval(duration: Duration) -> Self</code></h4>
                    <p>Define intervalo entre health checks.</p>
                </div>

                <div class="module-card">
                    <h4><code>HealthCheckBuilder::path(path: &str) -> Self</code></h4>
                    <p>Define path HTTP para health check.</p>
                </div>
            </section>

            <section id="performance" class="section fade-in">
                <h2>‚ö° Performance</h2>

                <div class="performance-chart">
                    <h3>Benchmarks - Throughput</h3>
                    <div class="chart-bar">
                        <div class="chart-label">Round Robin</div>
                        <div class="chart-track">
                            <div class="chart-fill" data-value="98" style="width: 0;">200k conn/s</div>
                        </div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">Least Connections</div>
                        <div class="chart-track">
                            <div class="chart-fill" data-value="95" style="width: 0;">185k conn/s</div>
                        </div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">IP Hash</div>
                        <div class="chart-track">
                            <div class="chart-fill" data-value="97" style="width: 0;">195k conn/s</div>
                        </div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">Com Sticky Sessions</div>
                        <div class="chart-track">
                            <div class="chart-fill" data-value="93" style="width: 0;">175k conn/s</div>
                        </div>
                    </div>
                </div>

                <div class="performance-chart mt-3">
                    <h3>Lat√™ncia (p99)</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Opera√ß√£o</th>
                                <th>AVX LoadBalancer</th>
                                <th>Melhoria</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Backend Selection</td>
                                <td>450 Œºs</td>
                                <td>5.8x mais r√°pido</td>
                            </tr>
                            <tr>
                                <td>Health Check</td>
                                <td>1.2 ms</td>
                                <td>4.2x mais r√°pido</td>
                            </tr>
                            <tr>
                                <td>Connection Forwarding</td>
                                <td>680 Œºs</td>
                                <td>4.9x mais r√°pido</td>
                            </tr>
                            <tr>
                                <td>Sticky Session Lookup</td>
                                <td>320 Œºs</td>
                                <td>7.1x mais r√°pido</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="mt-3">Caracter√≠sticas de Performance</h3>
                <div class="modules-grid">
                    <div class="module-card">
                        <h4>‚úÖ Zero-Copy Forwarding</h4>
                        <p>Forwarding otimizado sem c√≥pias de dados</p>
                    </div>
                    <div class="module-card">
                        <h4>‚úÖ Lock-Free Algorithms</h4>
                        <p>Sele√ß√£o de backend sem locks para m√°xima concorr√™ncia</p>
                    </div>
                    <div class="module-card">
                        <h4>‚úÖ Connection Pooling</h4>
                        <p>Pool de conex√µes eficiente para backends</p>
                    </div>
                    <div class="module-card">
                        <h4>‚úÖ Async Health Checks</h4>
                        <p>Health checks ass√≠ncronos sem bloqueio</p>
                    </div>
                </div>
            </section>

            <section id="usecases" class="section fade-in">
                <h2>üé¨ Casos de Uso</h2>

                <div class="module-card">
                    <h3>üåç Aplica√ß√µes Web de Alta Escala</h3>
                    <p>Distribua tr√°fego entre m√∫ltiplos servidores web para alta disponibilidade e escalabilidade.</p>
                    <pre><code>let lb = LoadBalancer::builder()
    .backends(web_servers)
    .strategy(Strategy::LeastConnections)
    .health_check(health_check)
    .serve().await?;</code></pre>
                </div>

                <div class="module-card mt-3">
                    <h3>üéÆ Gaming Servers</h3>
                    <p>Balanceie jogadores entre servidores de jogo com sticky sessions para manter estado.</p>
                    <pre><code>let lb = LoadBalancer::builder()
    .backends(game_servers)
    .sticky_session(sticky_config)
    .strategy(Strategy::LeastConnections)
    .serve().await?;</code></pre>
                </div>

                <div class="module-card mt-3">
                    <h3>üåê Multi-Region Deployment</h3>
                    <p>Roteie usu√°rios para o datacenter mais pr√≥ximo com geo-routing.</p>
                    <pre><code>let lb = LoadBalancer::builder()
    .geo_router(geo_config)
    .health_check(health_check)
    .serve().await?;</code></pre>
                </div>

                <div class="module-card mt-3">
                    <h3>üìπ Streaming & WebRTC</h3>
                    <p>Balanceie conex√µes WebRTC com STUN/TURN integrado.</p>
                    <pre><code>let lb = LoadBalancer::builder()
    .backends(streaming_servers)
    .stun_turn(stun_turn_config)
    .serve().await?;</code></pre>
                </div>
            </section>

            <section id="license" class="section fade-in">
                <h2>üìÑ Licen√ßa</h2>
                <p><strong>Copyright ¬© 2025 N√≠colas √Åvila - Todos os Direitos Reservados</strong></p>
                <p>Software Propriet√°rio - Veja <a href="../../LICENSE-PROPRIETARY.md">LICENSE-PROPRIETARY.md</a></p>
                <p class="mt-2">Para licenciamento comercial, entre em contato: <a href="mailto:nicolas@avila.inc">nicolas@avila.inc</a></p>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <p>¬© 2025 N√≠colas √Åvila - Todos os Direitos Reservados</p>
                <div class="footer-links">
                    <a href="https://avila.inc">Contato</a>
                    <a href="https://docs.avila.inc">Documenta√ß√£o</a>
                    <a href="../../LICENSE-PROPRIETARY.md">Licen√ßa</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="../assets/js/main.js"></script>
</body>
</html>
