// Copyright Â© 2025 NÃ­colas Ãvila - All Rights Reserved
// Proprietary Software - Avx Ecosystem

// Translations
const translations = {
  'pt-BR': {
    home: 'InÃ­cio',
    modules: 'MÃ³dulos',
    api: 'API',
    examples: 'Exemplos',
    license: 'LicenÃ§a',
    themeToggle: 'ðŸŒ“ Tema',
    overview: 'VisÃ£o Geral',
    types: 'Tipos DisponÃ­veis',
    usage: 'Exemplos de Uso',
    apiReference: 'ReferÃªncia da API',
    performance: 'Performance',
    useCases: 'Casos de Uso',
    licenseTitle: 'LicenÃ§a',
    footer: 'Â© 2025 Avila Inc. Todos os direitos reservados.',
    documentation: 'DocumentaÃ§Ã£o',
    support: 'Suporte',
    contact: 'Contato'
  },
  'ru': {
    home: 'Ð“Ð»Ð°Ð²Ð½Ð°Ñ',
    modules: 'ÐœÐ¾Ð´ÑƒÐ»Ð¸',
    api: 'API',
    examples: 'ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹',
    license: 'Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ',
    themeToggle: 'ðŸŒ“ Ð¢ÐµÐ¼Ð°',
    overview: 'ÐžÐ±Ð·Ð¾Ñ€',
    types: 'Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ñ‚Ð¸Ð¿Ñ‹',
    usage: 'ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ',
    apiReference: 'Ð¡Ð¿Ñ€Ð°Ð²Ð¾Ñ‡Ð½Ð¸Ðº API',
    performance: 'ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ',
    useCases: 'Ð¡Ð»ÑƒÑ‡Ð°Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ',
    licenseTitle: 'Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ',
    footer: 'Â© 2025 Avila Inc. Ð’ÑÐµ Ð¿Ñ€Ð°Ð²Ð° Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ñ‹.',
    documentation: 'Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ',
    support: 'ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°',
    contact: 'ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚'
  },
  'ja': {
    home: 'ãƒ›ãƒ¼ãƒ ',
    modules: 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«',
    api: 'API',
    examples: 'ä¾‹',
    license: 'ãƒ©ã‚¤ã‚»ãƒ³ã‚¹',
    themeToggle: 'ðŸŒ“ ãƒ†ãƒ¼ãƒž',
    overview: 'æ¦‚è¦',
    types: 'åˆ©ç”¨å¯èƒ½ãªåž‹',
    usage: 'ä½¿ç”¨ä¾‹',
    apiReference: 'APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹',
    performance: 'ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹',
    useCases: 'ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹',
    licenseTitle: 'ãƒ©ã‚¤ã‚»ãƒ³ã‚¹',
    footer: 'Â© 2025 Avila Inc. å…¨è‘—ä½œæ¨©æ‰€æœ‰ã€‚',
    documentation: 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ',
    support: 'ã‚µãƒãƒ¼ãƒˆ',
    contact: 'é€£çµ¡å…ˆ'
  },
  'zh-TW': {
    home: 'é¦–é ',
    modules: 'æ¨¡çµ„',
    api: 'API',
    examples: 'ç¯„ä¾‹',
    license: 'æŽˆæ¬Š',
    themeToggle: 'ðŸŒ“ ä¸»é¡Œ',
    overview: 'æ¦‚è¿°',
    types: 'å¯ç”¨é¡žåž‹',
    usage: 'ä½¿ç”¨ç¯„ä¾‹',
    apiReference: 'APIåƒè€ƒ',
    performance: 'æ•ˆèƒ½',
    useCases: 'ä½¿ç”¨æ¡ˆä¾‹',
    licenseTitle: 'æŽˆæ¬Š',
    footer: 'Â© 2025 Avila Inc. ç‰ˆæ¬Šæ‰€æœ‰ã€‚',
    documentation: 'æ–‡ä»¶',
    support: 'æ”¯æ´',
    contact: 'è¯çµ¡'
  },
  'ur': {
    home: 'ÛÙˆÙ…',
    modules: 'Ù…Ø§ÚˆÛŒÙˆÙ„Ø²',
    api: 'API',
    examples: 'Ù…Ø«Ø§Ù„ÛŒÚº',
    license: 'Ù„Ø§Ø¦Ø³Ù†Ø³',
    themeToggle: 'ðŸŒ“ ØªÚ¾ÛŒÙ…',
    overview: 'Ø¬Ø§Ø¦Ø²Û',
    types: 'Ø¯Ø³ØªÛŒØ§Ø¨ Ø§Ù‚Ø³Ø§Ù…',
    usage: 'Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©ÛŒ Ù…Ø«Ø§Ù„ÛŒÚº',
    apiReference: 'API Ø­ÙˆØ§Ù„Û',
    performance: 'Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ',
    useCases: 'Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Û’ Ù…Ø¹Ø§Ù…Ù„Ø§Øª',
    licenseTitle: 'Ù„Ø§Ø¦Ø³Ù†Ø³',
    footer: 'Â© 2025 Avila Inc. ØªÙ…Ø§Ù… Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ ÛÛŒÚºÛ”',
    documentation: 'Ø¯Ø³ØªØ§ÙˆÛŒØ²Ø§Øª',
    support: 'ØªØ¹Ø§ÙˆÙ†',
    contact: 'Ø±Ø§Ø¨Ø·Û'
  },
  'ar': {
    home: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
    modules: 'Ø§Ù„ÙˆØ­Ø¯Ø§Øª',
    api: 'API',
    examples: 'Ø£Ù…Ø«Ù„Ø©',
    license: 'Ø§Ù„ØªØ±Ø®ÙŠØµ',
    themeToggle: 'ðŸŒ“ Ø§Ù„Ø³Ù…Ø©',
    overview: 'Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©',
    types: 'Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©',
    usage: 'Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',
    apiReference: 'Ù…Ø±Ø¬Ø¹ API',
    performance: 'Ø§Ù„Ø£Ø¯Ø§Ø¡',
    useCases: 'Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',
    licenseTitle: 'Ø§Ù„ØªØ±Ø®ÙŠØµ',
    footer: 'Â© 2025 Avila Inc. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.',
    documentation: 'Ø§Ù„ØªÙˆØ«ÙŠÙ‚',
    support: 'Ø§Ù„Ø¯Ø¹Ù…',
    contact: 'Ø§ØªØµÙ„'
  },
  'de': {
    home: 'Startseite',
    modules: 'Module',
    api: 'API',
    examples: 'Beispiele',
    license: 'Lizenz',
    themeToggle: 'ðŸŒ“ Thema',
    overview: 'Ãœbersicht',
    types: 'VerfÃ¼gbare Typen',
    usage: 'Verwendungsbeispiele',
    apiReference: 'API-Referenz',
    performance: 'Leistung',
    useCases: 'AnwendungsfÃ¤lle',
    licenseTitle: 'Lizenz',
    footer: 'Â© 2025 Avila Inc. Alle Rechte vorbehalten.',
    documentation: 'Dokumentation',
    support: 'UnterstÃ¼tzung',
    contact: 'Kontakt'
  },
  'fr': {
    home: 'Accueil',
    modules: 'Modules',
    api: 'API',
    examples: 'Exemples',
    license: 'Licence',
    themeToggle: 'ðŸŒ“ ThÃ¨me',
    overview: 'AperÃ§u',
    types: 'Types disponibles',
    usage: "Exemples d'utilisation",
    apiReference: "RÃ©fÃ©rence de l'API",
    performance: 'Performance',
    useCases: "Cas d'utilisation",
    licenseTitle: 'Licence',
    footer: 'Â© 2025 Avila Inc. Tous droits rÃ©servÃ©s.',
    documentation: 'Documentation',
    support: 'Support',
    contact: 'Contact'
  },
  'lv': {
    home: 'SÄkums',
    modules: 'ModuÄ¼i',
    api: 'API',
    examples: 'PiemÄ“ri',
    license: 'Licence',
    themeToggle: 'ðŸŒ“ TÄ“ma',
    overview: 'PÄrskats',
    types: 'Pieejamie tipi',
    usage: 'LietoÅ¡anas piemÄ“ri',
    apiReference: 'API atsauce',
    performance: 'VeiktspÄ“ja',
    useCases: 'LietoÅ¡anas gadÄ«jumi',
    licenseTitle: 'Licence',
    footer: 'Â© 2025 Avila Inc. Visas tiesÄ«bas aizsargÄtas.',
    documentation: 'DokumentÄcija',
    support: 'Atbalsts',
    contact: 'Kontakts'
  },
  'uz': {
    home: 'Bosh sahifa',
    modules: 'Modullar',
    api: 'API',
    examples: 'Misollar',
    license: 'Litsenziya',
    themeToggle: 'ðŸŒ“ Mavzu',
    overview: 'Umumiy ko\'rinish',
    types: 'Mavjud turlar',
    usage: 'Foydalanish misollari',
    apiReference: 'API ma\'lumotnomasi',
    performance: 'Samaradorlik',
    useCases: 'Foydalanish holatlari',
    licenseTitle: 'Litsenziya',
    footer: 'Â© 2025 Avila Inc. Barcha huquqlar himoyalangan.',
    documentation: 'Hujjatlar',
    support: 'Qo\'llab-quvvatlash',
    contact: 'Aloqa'
  },
  'es': {
    home: 'Inicio',
    modules: 'MÃ³dulos',
    api: 'API',
    examples: 'Ejemplos',
    license: 'Licencia',
    themeToggle: 'ðŸŒ“ Tema',
    overview: 'DescripciÃ³n general',
    types: 'Tipos disponibles',
    usage: 'Ejemplos de uso',
    apiReference: 'Referencia de API',
    performance: 'Rendimiento',
    useCases: 'Casos de uso',
    licenseTitle: 'Licencia',
    footer: 'Â© 2025 Avila Inc. Todos los derechos reservados.',
    documentation: 'DocumentaciÃ³n',
    support: 'Soporte',
    contact: 'Contacto'
  }
};

// Theme Management
function initTheme() {
  const savedTheme = localStorage.getItem('avx-theme') || 'light';
  document.body.className = savedTheme + '-theme';
}

function toggleTheme() {
  const currentTheme = document.body.classList.contains('light-theme') ? 'light' : 'dark';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  document.body.className = newTheme + '-theme';
  localStorage.setItem('avx-theme', newTheme);
}

// Language Management
function initLanguage() {
  const savedLang = localStorage.getItem('avx-language') || 'pt-BR';
  const langSelect = document.getElementById('language-select');
  if (langSelect) {
    langSelect.value = savedLang;
    changeLanguage(savedLang);
  }
}

function changeLanguage(lang) {
  localStorage.setItem('avx-language', lang);
  const translation = translations[lang] || translations['pt-BR'];

  // Update all translatable elements
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    if (translation[key]) {
      element.textContent = translation[key];
    }
  });
}

// Smooth Scrolling
function initSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
}

// Intersection Observer for Animations
function initAnimations() {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, {
    threshold: 0.1
  });

  document.querySelectorAll('section, .card, .use-case').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(30px)';
    el.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
    observer.observe(el);
  });
}

// Code Highlighting (Simple)
function highlightCode() {
  document.querySelectorAll('pre code').forEach(block => {
    // Simple syntax highlighting for Rust
    let code = block.innerHTML;

    // Keywords
    code = code.replace(/\b(fn|let|mut|pub|struct|enum|impl|trait|use|mod|const|static|if|else|match|for|while|loop|return|async|await)\b/g,
      '<span style="color: #FF8C00; font-weight: bold;">$1</span>');

    // Types
    code = code.replace(/\b([A-Z][a-zA-Z0-9]*)\b/g,
      '<span style="color: #FFD700; font-weight: bold;">$1</span>');

    // Strings
    code = code.replace(/"([^"]*)"/g,
      '<span style="color: #4CAF50;">"$1"</span>');

    // Comments
    code = code.replace(/\/\/(.*?)$/gm,
      '<span style="color: #888; font-style: italic;">//$1</span>');

    block.innerHTML = code;
  });
}

// Search Functionality
function initSearch() {
  const searchInput = document.getElementById('search-input');
  if (searchInput) {
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase();
      document.querySelectorAll('section').forEach(section => {
        const text = section.textContent.toLowerCase();
        if (text.includes(searchTerm) || searchTerm === '') {
          section.style.display = 'block';
        } else {
          section.style.display = 'none';
        }
      });
    });
  }
}

// Copy Code Button
function initCopyButtons() {
  document.querySelectorAll('pre').forEach(pre => {
    const button = document.createElement('button');
    button.textContent = 'ðŸ“‹ Copiar';
    button.className = 'copy-button';
    button.style.cssText = `
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 0.5rem 1rem;
      background: var(--avx-orange);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.8rem;
    `;

    pre.style.position = 'relative';
    pre.appendChild(button);

    button.addEventListener('click', () => {
      const code = pre.querySelector('code')?.textContent || pre.textContent;
      navigator.clipboard.writeText(code).then(() => {
        button.textContent = 'âœ… Copiado!';
        setTimeout(() => {
          button.textContent = 'ðŸ“‹ Copiar';
        }, 2000);
      });
    });
  });
}

// Performance Metrics Animation
function animateMetrics() {
  document.querySelectorAll('.metric').forEach((metric, index) => {
    setTimeout(() => {
      metric.style.animation = 'fadeIn 0.5s ease-in, pulse 2s infinite';
    }, index * 100);
  });
}

// Initialize everything when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  initTheme();
  initLanguage();
  initSmoothScroll();
  initAnimations();
  highlightCode();
  initSearch();
  initCopyButtons();
  animateMetrics();

  // Event listeners
  const themeToggle = document.getElementById('theme-toggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', toggleTheme);
  }

  const langSelect = document.getElementById('language-select');
  if (langSelect) {
    langSelect.addEventListener('change', (e) => changeLanguage(e.target.value));
  }
});

// Export for use in other scripts
window.AvxDocs = {
  toggleTheme,
  changeLanguage,
  translations
};
